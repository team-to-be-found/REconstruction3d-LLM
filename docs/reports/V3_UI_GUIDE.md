# V3 UI 使用指南

## 🚀 快速启动

### 方式 1: 直接访问（推荐）

服务器已经在运行，直接在浏览器中打开：

```
http://localhost:3000/v3
```

### 方式 2: 重启服务器

如果服务器停止了，执行：

```bash
npm run dev
```

等待 1-2 秒，然后访问 http://localhost:3000/v3

## ⏱️ 加载时间线

打开页面后，请耐心等待 **3 秒**：

```
0 秒 ─────► 页面框架加载（白屏/UI 骨架）
1 秒 ─────► 开始加载数据（节点数: 0）
2 秒 ─────► 数据加载完成（节点数: 117）
3 秒 ─────► 3D 场景渲染完成（显示紫色节点）
```

**关键点**: 如果 3 秒后节点数还是 0，说明数据加载失败。

## 🔍 判断加载是否成功

### ✅ 加载成功的标志

1. **左侧面板显示**：
   - 总节点: 117
   - Skills: 106
   - Plugins: 1
   - MCP Servers: 6

2. **中央 3D 场景显示**：
   - 青色发光的机器人
   - 紫色/粉色的环形节点
   - 节点分布在轨道上

3. **底部显示**：
   - "节点总数: 117"

### ❌ 加载失败的标志

1. **节点数一直是 0**
2. **3D 场景空白（只有机器人，没有节点）**
3. **浏览器控制台有错误**

## 🐛 加载失败排查（按 F12）

### 1. 查看 Console 标签

**应该看到的正常日志**：
```
=== V3 ModernTopBar Auto-Load Start ===
✅ Claude配置加载成功
Generated 117 Claude config nodes
=== V3 Auto-Load Complete ===
```

**如果看到错误**：
- 红色文字：JavaScript 错误
- "Failed to fetch"：API 请求失败
- "Cannot read property"：数据格式错误

### 2. 查看 Network 标签

**关键请求**：
| 请求 | 状态 | 说明 |
|------|------|------|
| `/v3` | 200 | 主页面加载成功 |
| `/api/project-structure` | 200 | 数据 API 正常 |
| `_next/static/*` | 200 | 静态资源加载 |

**如果状态不是 200**：
- 404: 文件不存在
- 500: 服务器错误
- (failed): 网络请求失败

## 🎨 功能说明

### 顶部导航

| 按钮 | 功能 |
|------|------|
| **Claude 配置** | 切换到 Claude 配置可视化（117 节点） |
| **项目结构** | 切换到项目文件结构（40 节点） |
| **2D** | 2D 平面视图（未来功能） |
| **3D** | 3D 立体视图（当前模式）⭐ |
| **VR** | VR 虚拟现实（未来功能） |
| 🔍 | 搜索节点 |
| ⚙️ | 设置（未来功能） |

### 左侧过滤器

| 功能 | 说明 |
|------|------|
| 节点类型复选框 | 点击显示/隐藏该类型节点 |
| "全部启用" | 显示所有节点类型 |
| "全部禁用" | 隐藏所有节点类型 |

### 3D 场景交互

| 操作 | 功能 |
|------|------|
| 鼠标左键拖动 | 旋转视图 |
| 鼠标滚轮 | 缩放视图 |
| 点击节点 | 查看详情（未来功能） |

### 底部工具栏

| 按钮 | 功能 |
|------|------|
| **-** | 缩小视图 |
| **+** | 放大视图 |
| **重置** | 重置到初始视角 |

## 📞 获取帮助

如果按照上述步骤仍然无法加载，请提供以下信息：

1. **浏览器控制台错误**（按 F12，截图 Console 标签）
2. **Network 请求状态**（截图 Network 标签）
3. **页面实际显示效果**（截图）
4. **服务器日志**：
   ```bash
   tail -n 50 e:\tmp\claude\e--Bobo-s-Coding-cache-reconstruction-3d\tasks\b7e8c9e.output
   ```

## 🎯 预期效果对比

### 正常状态
- ✅ 节点总数: 117
- ✅ 3D 场景有紫色节点
- ✅ 左侧显示具体类型数量
- ✅ FPS: 60
- ✅ 无控制台错误（忽略 Electron 和 favicon 警告）

### 异常状态
- ❌ 节点总数: 0
- ❌ 3D 场景空白
- ❌ 左侧所有类型都是 0
- ❌ 控制台有红色错误
- ❌ 页面一直在 Loading

## 💡 提示

1. **首次加载较慢**：第一次打开可能需要 5-8 秒，后续刷新只需 2-3 秒
2. **WebGL 支持**：需要浏览器支持 WebGL（现代浏览器都支持）
3. **硬件加速**：建议在浏览器设置中启用硬件加速
4. **性能模式**：如果渲染卡顿，关闭其他占用 GPU 的程序

---

**文档版本**: 1.0  
**更新时间**: 2026-02-04  
**适用版本**: V3 UI
